<div class="no-printing">
  <%= render 'shared/get_all_bookings', office: @office %>
  <%= link_to t('cleaning_companies'), cleaning_companies_path, class: "text-sm link" %>
  <hr>
  <%= render "filter" %>
</div>
<% if @last_cleaning_date.present? %>
  <p class="alert alert-info position-relative"><%= t('cleaning_done_upto', date: l(@last_cleaning_date)) %></p>
<% end %>
<% if @bookings_without_cleaning.present? %>
  <p class="alert alert-warning position-relative"><%= t('cleaning_pending') %>
    <% @bookings_without_cleaning.each do |booking| %>
      <br>
      <%= l(booking.checkout) %> <%= booking.firstname %> <%= booking.lastname %>
      <br>
    <% end %>
  </p>
<% end %>
<% if @incomplete_cleaning_schedules.present? %>
  <div class="mt-5 p-3 alert alert-danger position-relative">
    <h5 class="text-start text-left fw-bold font-weight-bold"><%= t('incomplete_cleaning') %></h5>
    <% @incomplete_cleaning_schedules.each do |cleaning_schedule| %>
      <%= render cleaning_schedule  %>
    <% end %>
  </div>
<% end %>
<div class="mt-5">
  <% @grouped_cleaning_schedules.each do |cleaning_date, cleaning_schedules| %>
    <div class="no-page-break pt-3">
      <h5 class="text-start text-left fw-bold font-weight-bold"><%= l(cleaning_date, format: :long) %></h5>
      <div class="row py-2 rate-dates">
        <div class="col-md-1 col no-printing"><%= t('priority') %></div>
        <div class="col-md-3 col"><%= t('vrental_title') %></div>
        <div class="col-md-2 col"><%= t('cleaning_date') %></div>
        <div class="col-md-3 col"><%= t('next_booking_info') %></div>
        <div class="col-md-2 col"><%= t('cleaning_company') %></div>
        <div class="col-md-1 col no-printing"></div>
      </div>
      <hr>
      <% cleaning_schedules.sort_by(&:priority).each do |cleaning_schedule| %>
        <%= render cleaning_schedule, booking: cleaning_schedule.booking || cleaning_schedule.owner_booking %>
        <hr>
      <% end %>
    </ul>
  <% end %>
</div>
<div class="no-printing text-center" data-controller="pdf-modal">
  <button type="button" class="btn btn-sm btn-primary" data-bs-toggle="modal" data-bs-target="#cleaningSchedules" data-action="click->pdf-modal#loadModal"
    data-base-url="<%= office_cleaning_schedules_path(@office) %>"
    data-cleaning-company-id="<%= params[:cleaning_company_id] %>"
    data-from-cleaning-date="<%= params[:from_cleaning_date] %>"
    data-to-cleaning-date="<%= params[:to_cleaning_date] %>">
    <%= t('download_pdf') %>
  </button>
  <%= render 'pdf_modal' %>
</div>
